/*
	Slimbox v2.04 - The ultimate lightweight Lightbox clone for jQuery
	(c) 2007-2010 Christophe Beyls <http://www.digitalia.be>
	MIT-style license.
*/
(function(z){var H=z(window),x,g,I=-1,q,A,p,G,y,B,O,u,o=!window.XMLHttpRequest,v=[],n=document.documentElement,l={},w=new Image(),M=new Image(),K,c,h,s,L,m,e,J,d,D,N;z(function(){z("body").append(z([K=z('<div id="lbOverlay" />')[0],c=z('<div id="lbCenter" />')[0],J=z('<div id="lbBottomContainer" />')[0]]).css("display","none"));h=z('<div id="lbImage" />').appendTo(c).append(s=z('<div style="position: relative;" />').append([L=z('<a id="lbPrevLink" href="#" />').click(E)[0],m=z('<a id="lbAltLink" href="#" />').click(a)[0],e=z('<a id="lbNextLink" href="#" />').click(f)[0]])[0])[0];d=z('<div id="lbBottom" />').appendTo(J).append([z('<a id="lbCloseLink" href="#" />').add(K).click(F)[0],D=z('<div id="lbCaption" />')[0],N=z('<div id="lbNumber" />')[0],z('<div style="clear: both;" />')[0]])[0]});z.slimbox=function(R,Q,P){x=z.extend({loop:false,overlayOpacity:0.8,overlayFadeDuration:400,resizeDuration:400,resizeEasing:"swing",initialWidth:250,initialHeight:250,imageFadeDuration:400,captionAnimationDuration:400,counterText:"Image {x} of {y}",closeKeys:[27,88,67],altKeys:[68,70],previousKeys:[37,80],nextKeys:[39,78]},P);if(typeof R=="string"){R=[[R,Q,P]];Q=0}B=H.scrollTop()+(H.height()/2);O=x.initialWidth;u=x.initialHeight;z(c).css({top:Math.max(0,B-(u/2)),width:O,height:u,marginLeft:-O/2}).show();y=o||(K.currentStyle&&(K.currentStyle.position!="fixed"));if(y){K.style.position="absolute"}z(K).css("opacity",x.overlayOpacity).fadeIn(x.overlayFadeDuration);C();k(1);g=R;x.loop=x.loop&&(g.length>1);return b(Q)};z.fn.slimbox=function(P,S,R){S=S||function(T){return[T.href,T.title,z(T).attr("lb:alternate")]};R=R||function(){return true};var Q=this;return Q.unbind("click").click(function(){var V=this,X=0,W,T=0,U;W=z.grep(Q,function(Z,Y){return R.call(V,Z,Y)});for(U=W.length;T<U;++T){if(W[T]==V){X=T}W[T]=S(W[T],T)}return z.slimbox(W,X,P)})};function C(){var Q=H.scrollLeft(),P=H.width();z([c,J]).css("left",Q+(P/2));if(y){z(K).css({left:Q,top:H.scrollTop(),width:P,height:H.height()})}}function k(P){if(P){z("object").add(o?"select":"embed").each(function(R,S){v[R]=[S,S.style.visibility];S.style.visibility="hidden"})}else{z.each(v,function(R,S){S[0].style.visibility=S[1]});v=[]}var Q=P?"bind":"unbind";H[Q]("scroll resize",C);z(document)[Q]("keydown",r)}function r(R){var Q=R.keyCode,P=z.inArray;return(P(Q,x.closeKeys)>=0)?F():(P(Q,x.nextKeys)>=0)?f():(P(Q,x.altKeys)>=0)?a():(P(Q,x.previousKeys)>=0)?E():false}function E(){return b(A)}function f(){return b(G)}function a(){if(g[I][2]){window.open(g[I][2])}return false}function b(P){if(P>=0){I=P;q=g[I][0];p=g[I][2];A=(I||(x.loop?g.length:0))-1;G=((I+1)%g.length)||(x.loop?0:-1);t();c.className="lbLoading";l=new Image();l.onload=j;l.src=q}return false}function j(){c.className="";z(h).css({backgroundImage:"url("+q+")",visibility:"hidden",display:""});z(s).width(l.width);z([s,m,L,e]).height(l.height);z(m).removeClass("lbViewFull lbDownload");if(p&&p.match(/\.(jp(e)?g)|(png)$/i)){z(m).addClass("lbViewFull")}else{if(p&&p.match(/\.txt$/i)){z(m).addClass("lbDownload")}}z(D).html(g[I][1]||"");z(N).html((((g.length>1)&&x.counterText)||"").replace(/{x}/,I+1).replace(/{y}/,g.length));if(A>=0){w.src=g[A][0]}if(G>=0){M.src=g[G][0]}O=h.offsetWidth;u=h.offsetHeight;var P=Math.max(0,B-(u/2));if(c.offsetHeight!=u){z(c).animate({height:u,top:P},x.resizeDuration,x.resizeEasing)}if(c.offsetWidth!=O){z(c).animate({width:O,marginLeft:-O/2},x.resizeDuration,x.resizeEasing)}z(c).queue(function(){z(J).css({width:O,top:P+u,marginLeft:-O/2,visibility:"hidden",display:""});z(h).css({display:"none",visibility:"",opacity:""}).fadeIn(x.imageFadeDuration,i)})}function i(){if(g[I][2]){z(m).show()}if(A>=0){z(L).show()}if(G>=0){z(e).show()}z(d).css("marginTop",-d.offsetHeight).animate({marginTop:0},x.captionAnimationDuration);J.style.visibility=""}function t(){l.onload=null;l.src=w.src=M.src=q;z([c,h,d]).stop(true);z([L,m,e,h,J]).hide()}function F(){if(I>=0){t();I=A=G=-1;z(c).hide();z(K).stop().fadeOut(x.overlayFadeDuration,k)}return false}})(jQuery);if(!/android|iphone|ipod|series60|symbian|windows ce|blackberry/i.test(navigator.userAgent)){jQuery(function(a){a("a[rel^='lightbox']").slimbox({},null,function(b){return(this==b)||((this.rel.length>8)&&(this.rel==b.rel))})})};